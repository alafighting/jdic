<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE"
 content="text/html; charset=iso-8859-1">
  <title>JDIC Application Deployment</title>
  <meta name="GENERATOR" content="Microsoft FrontPage 4.0">
  <meta name="AUTHOR" content=" ">
  <meta name="CREATED" content="20000519;14440300">
  <meta name="CHANGEDBY" content=" ">
  <meta name="CHANGED" content="20000901;17584900">
  <style>
	<!--
		@page { size: 21cm 29.7cm }
		P { margin-left: 0.99cm; font-size: 12pt }
		H1 { font-size: 20pt }
		TD P { margin-left: 0.99cm; font-size: 12pt }
		H2 { font-size: 16pt }
		P.comment { color: #666666 }
		P.required { color: #800000 }
.style1 {color: #CC0000}
.STYLE4 {color: #0000FF}
.STYLE5 {color: #000000}
.STYLE9 {color: #FF00FF}
.STYLE10 {color: #666666}
	-->
	</style>
</head>
<body>
<!-- etracker PARAMETER 2.0.1 -->
<script type="text/javascript">
var et_easy = 0;
var et_ssl = 1;
var et_pagename = "JDIC%20Application%20Deployment";
var et_areas = "";
var et_ilevel = 0;
</script><!-- etracker PARAMETER END --><!-- etracker CODE 2.0.6 -->
<script type="text/javascript">
var et_server="http://www.etracker.de";
var et_sslserver="https://www.etracker.de";
var et_referer=et_server+"/soverview.php?c=1&amp;et=";
var et_sw,et_sc="na";var et_pl,tmp,cex="";if(navigator.appName==
'Netscape'||navigator.appName=='Opera'){for(i=0;i<navigator.plugins.length;++i)
et_pl+=navigator.plugins[i].name+';';et_pl=escape(et_pl);}function et_pQ(param)
{var ll,fl;var qS,pV,rS;qS=document.location.search;pV="";if(qS.length>1){qS=qS.
substr(1);fl=qS.indexOf(param);if(fl!=-1){fl+=param.length+1;ll=qS.indexOf('&',
fl);if(ll==-1) ll=qS.length;pV=qS.substring(fl,ll);rS=new RegExp(" ","g");pV=
pV.replace(rS,"+");f1=pV.indexOf('=',0);pV=pV.substring(f1+1);}} return pV;}
function et_eC(param){var et_a='',et_t='',et_p='';var et_ref=escape(document.
referrer);if(typeof(top.document)=="object")et_ref=escape(top.document.referrer);
if(et_ref!="")et_ref="&amp;ref="+et_ref;et_sw="&amp;swidth="+et_sw;et_sc=
"&amp;scolor="+et_sc;if(et_easy)et_easy="&amp;et_easy=1";else et_easy="";if(
et_pl!="")et_pl="&amp;p="+et_pl;if(et_areas!="")et_a="&amp;et_areas="+
escape(et_areas);if(typeof(et_target)=="undefined"||typeof(et_target)==
"unknown"){et_target="";et_tval="0";et_tonr="0";et_tsale=0;}if(typeof(
et_lpage)=="undefined"||typeof(et_lpage)=="unknown")et_lpage="";else
et_lpage="&amp;et_lpage="+et_lpage;if(typeof(et_trig)=="undefined"||typeof(
et_trig)=="unknown")et_trig="";if(et_trig!="")cex="&amp;et_trig="+
et_trig;if((tc=et_pQ("et_cid"))&&(tl=et_pQ("et_lid")))cex=cex+"&amp;et_cid="+
tc+"&amp;et_lid="+tl;if(tmp=et_pQ("et_target")||et_target!=""){tv=et_pQ
("et_tval");to=et_pQ("et_tonr");ts=et_pQ("et_tsale");et_t="&amp;et_target="+
escape(tmp.length?tmp:et_target)+","+(tv?tv:et_tval)+","+(to?to:et_tonr)+
","+(ts?ts:et_tsale);}if(et_pagename!="")et_p="&amp;et_pagename="+escape(
et_pagename);tc=new Date();document.write("<a target='_blank' href='"+et_referer+
param+"'><img border='0' alt='' src='"+(et_ssl==1?et_sslserver:et_server)+
"/cnt.php?java=y&amp;tc="+tc.getTime()+"&amp;et="+param+"&amp;et_ilevel="+
et_ilevel+et_easy+et_p+et_a+cex+et_t+et_lpage+et_sw+et_sc+et_ref+et_pl+"'/>"+
"<\/a>");}</script>
<script type="text/javascript1.2">et_sw=screen.width;et_sc=
navigator.appName!='Netscape'?screen.colorDepth:screen.pixelDepth;</script>
<script type="text/javascript">et_eC('ir339g');</script><!-- etracker CODE NOSCRIPT -->
<noscript><a target="_blank"
href="http://www.etracker.de/soverview.php?c=1&amp;et=ir339g">
<img border="0" alt=""
src="https://www.etracker.de/cnt.php?et=ir339g&amp;java=n&amp;
et_easy=0&amp;et_pagename=JDIC%20Application%20Deployment&amp;et_areas=&amp;et_ilevel=&amp;
et_target=&amp;et_lpage=&amp;et_trig="/></a>
</noscript>
<!-- etracker CODE END -->
<table width="100%" height="25" border="0" cellpadding="4"
 cellspacing="0" bordercolor="#ffffcc" bgcolor="#99ccff">
  <tbody>
    <tr>
      <td><strong><font face="sans-serif" size="3"><a name="JDIC_Applet"></a>Deploy  JDIC
        With Java Applet</font></strong></td>
    </tr>
  </tbody>
</table>
<b><h3>Abstract:</h3>
</b>
JDIC uses Java extensions to work with Java Applet. After jdic stuffs  are downloaded into  local machine jre's ext folder,it will search  specific jars(jdic_native.jar or jdic_crossplatform.jar) then extract  them and set needed stuffs correctly to environment.Thus, it can run  well as in a local machine. Java extensions is the key tech we use here, to know more about it,  please refer  http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/extensions.
Issue <a href="https://jdic.dev.java.net/issues/show_bug.cgi?id=428">https://jdic.dev.java.net/issues/show_bug.cgi?id=428</a> has been opened and you can get more background there. <br>
<b><h3>Main steps:</h3>
</b>
<b>1 Develop your applet app</b><br>
Here is a sample applet:<br>
<span class="STYLE10">public class AppletBrowser extends JApplet {<br>
&nbsp;&nbsp; &nbsp;private static final long serialVersionUID = 1L;<br>
&nbsp;&nbsp; &nbsp;public void init() {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;WebBrowser.setDebug(true);<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;WebBrowser browser = new WebBrowser();&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;URL url;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;try {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;url = new URL("http://www.google.com");<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;browser.setURL(url);<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} catch (MalformedURLException e) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;e.printStackTrace();<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;this.add(browser);<br>
&nbsp;&nbsp; &nbsp;}<br>
}</span><br>
<br>
Create manifest file for your app<br>
Manifest file for applet uses <span class="STYLE5">jdic_native.jar</span>(for windows)
<br>
&nbsp;&nbsp; &nbsp;Extension-List: <span class="STYLE9">jdic</span> <span class="STYLE4">jdic_native</span><br>
&nbsp;&nbsp; &nbsp;jdic-Extension-Name: org.jdic<br>
&nbsp;&nbsp; &nbsp;jdic-Specification-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;jdic-Implementation-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;jdic-Implementation-Vendor-Id: com.sun<br>
&nbsp;&nbsp; <span class="STYLE9">&nbsp;jdic-Implementation-URL: http://localhost:8080/JDICApplet/jdic.jar</span><br>
&nbsp;&nbsp; &nbsp;jdic_native-Extension-Name: org.jdic_native<br>
&nbsp;&nbsp; &nbsp;jdic_native-Specification-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;jdic_native-Implementation-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;jdic_native-Implementation-Vendor-Id: com.sun<br>
&nbsp;&nbsp; <span class="STYLE4">&nbsp;jdic_native-Implementation-URL: http://localhost:8080/JDICApplet/jdic_native.jar&nbsp;</span>&nbsp; &nbsp;<br>
<br>
Manifest for applet uses jdic_crossplatform.jar
<br>
&nbsp;&nbsp; &nbsp;Extension-List: <span class="STYLE9">jdic</span> <span class="STYLE4">jdic_crossplatform</span><br>
&nbsp;&nbsp; &nbsp;jdic-Extension-Name: org.jdic<br>
&nbsp;&nbsp;&nbsp; jdic-Specification-Version: 20060631<br>
&nbsp; &nbsp; jdic-Implementation-Version: 20060631<br>
&nbsp;&nbsp;&nbsp; jdic-Implementation-Vendor-Id: com.sun<br>
<span class="STYLE9">&nbsp;&nbsp;&nbsp; jdic-Implementation-URL: http://localhost:8080/JDICApplet/jdic.jar</span><br>
&nbsp;&nbsp; &nbsp;jdic_crossplatform-Extension-Name: org.jdic_crossplatform<br>
&nbsp;&nbsp; &nbsp;jdic_crossplatform-Specification-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;jdic_crossplatform-Implementation-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;jdic_crossplatform-Implementation-Vendor-Id: com.sun<br>
&nbsp;&nbsp; &nbsp;<span class="STYLE4">jdic_crossplatform-Implementation-URL: http://localhost:8080/JDICApplet/jdic_crossplatform.jar</span><br>
<br>
Jar and sign the applet<br>
<span class="STYLE10">&nbsp;&nbsp;&nbsp; jar cmf MANIFIE.MF&nbsp;&nbsp; &nbsp;test.jar *.class<br>
&nbsp;&nbsp;&nbsp; jarsigner -keystore jdic.keystore test.jar jdic</span><br>
 Refer http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/rsa_signing.html for how to sign a jar file.<br>
&nbsp;<br>
<b>2 Sign jdic.jar</b><br>
Create manifest file for jdic.jar<br>
<span class="STYLE10">&nbsp;&nbsp; &nbsp;Extension-Name: org.jdic<br>
&nbsp;&nbsp; &nbsp;Specification-Vendor: Sun Microsystems, Inc<br>
&nbsp;&nbsp; &nbsp;Specification-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;Implementation-Vendor-Id: com.sun<br>
&nbsp;&nbsp; &nbsp;Implementation-Vendor: Sun Microsystems, Inc<br>
&nbsp;&nbsp; &nbsp;Implementation-Version: 20060631</span><br>
Unpack jdic.jar(download from this web site) and re-jar and sign it<br>
<span class="STYLE10">&nbsp; jar cmf MANIFEST.MF jdic.jar org<br>
&nbsp; jarsigner -keystore jdic.keystore jdic.jar jdic</span><br>
<strong>Attention:You must sign jars in the extension list, else Java Applet will not download them.</strong><br>
<br>
<b>3 Sign jdic_native.jar</b><br>
Create manifest for jdic_native.jar<br>
<span class="STYLE10">&nbsp;&nbsp; &nbsp;Extension-Name: org.jdic_native<br>
&nbsp;&nbsp; &nbsp;Specification-Vendor: Sun Microsystems, Inc<br>
&nbsp;&nbsp; &nbsp;Specification-Version: 20060631<br>
&nbsp;&nbsp; &nbsp;Implementation-Vendor-Id: com.sun<br>
&nbsp;&nbsp; &nbsp;Implementation-Vendor: Sun Microsystems, Inc<br>
&nbsp;&nbsp; &nbsp;Implementation-Version: 20060631</span><br>
Jar and sign jdic_native.jar<br>
<span class="STYLE10">&nbsp; jar cmf MANIFEST.MF jdic_native.jar *.dll *.exe<br>
&nbsp; jarsigner -keystore jdic.keystore jdic_native.jar jdic</span><br>
&nbsp; <br>
 For jdic_crossplatform.jar,act as below:<br>
 <span class="STYLE10">&nbsp; jar cmf MANIFEST.MF jdic_crossplatform.jar sunos windows linux demo javadoc COPYING README.html defmailer.properties<br>
&nbsp; jarsigner -keystore jdic.keystore jdic_crossplatform.jar jdic</span><br>
<br>
<b>4 Deploy test.jar with jdic.jar and jdic_native.jar(or jdic_crossplatform.jar)</b><br>
<b>5 If everything is ok, a window will show to ask  your permission  to install extensions, confirm it and jdic stuffs will be  installed.</b><br>
<b><h3>Reference resources:</h3></b>
Issue <a href="https://jdic.dev.java.net/issues/show_bug.cgi?id=428">https://jdic.dev.java.net/issues/show_bug.cgi?id=428</a> gives all stuffs of this sample.<br>
How to sign a jar file: <a href="http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/rsa_signing.html">http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/rsa_signing.html</a><br>
  Java extensions : <a href="http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/extensions.html">http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/extensions.html</a><br>
</p>
<table width="100%" height="25" border="0" cellpadding="4"
 cellspacing="0" bordercolor="#ffffcc" bgcolor="#99ccff">
  <tbody>
    <tr>
      <td><strong><font face="sans-serif" size="3"><a name="JDIC_WebStart"></a>Deploying a JDIC
Application Using Java Web Start</font></strong></td>
    </tr>
  </tbody>
</table>
<br>
Java&#8482; Web Start technology provides powerful tools to deploy
cross-platform client-side Java applications. You can find information
about these tools at the <a
 href="http://java.sun.com/products/javawebstart/">Java Web Start
website</a>. This document walks you through the process of using Java
Web Start to deploy an application that uses the JDIC APIs.
<h3><b>Sample Application: FileExplorer</b></h3>
<blockquote>To give the implementation details of how to deploy a JDIC
application using Java Web Start, we'll use a JDIC demo application
"FileExplorer" as a sample application. This is currently deployed in
the <a href="https://jdic.dev.java.net"> JDIC home page</a>. The
source code of FileExplorer is provided under the <code>demo/FileExplorer</code>
subdirectory in both the binary and source distributions.&nbsp; <br>
  <br>
FileExplorer is a simple cross-platform file explorer that allows users
to view the files and folders on a local disk. It uses the JDIC APIs to
automate launching the default file handler for a particular file type,
the system default browser, and the system mailer. Figure 1
demonstrates the application running on Windows XP. <br>
  <br>
Figure 1. FileExplorer running on Windows XP.</blockquote>
<p><img border="0" src="../resource/fileexplorer.jpg" width="644"
 height="422"><br>
<br>
</p>
<h3><b>Steps </b><b>for deploying the FileExplorer application using
Java Web Start<br>
<br>
</b></h3>
<b>1. Package the required application and JDIC binary files as JAR
files.</b>
<blockquote>
  <ul>
    <li>Create a <code><b>fileexplorer.jar</b></code> file with the
generated FileExplorer .class files and image resource files using the <code>jar</code>
      tool:<br>
      &nbsp;&nbsp;&nbsp; For Windows: <code>C:\temp\FileExplorer&gt;jar cvf
      fileexplorer.jar *.class images/*<br>
      &nbsp; </code>For Linux/Unix: <code>/temp/FileExplorer&gt;jar cvf
      fileexplorer.jar *.class images/*</code></li>
    <li>Create a platform-dependent <code><b>jdic-native.jar</b></code>
file with the platform-dependent JDIC native files using the <code>jar</code>
      tool:<br>
      &nbsp;&nbsp;&nbsp;&nbsp; For Windows: <code>C:\jdic\dist\windows&gt;jar
      cvf jdic-native.jar *.dll *.exe<br>
      </code>&nbsp;&nbsp;&nbsp;&nbsp; For Linux/Unix: <code>/temp/jdic/dist/linux&gt;jar
      cvf jdic-native.jar *.so mozembed-* defmailer.properties</code><code><br>
      </code>
      <span style="font-weight: bold;">NOTE</span>: the native jar file
name must be <code style="font-weight: bold;">jdic-native.jar</code>.
Since the application needs to retrieve the native files after the jar
file is unjar'ed by Java Web Start.<br>
    </li>
    <li>Put the generated JAR files and platform-dependent <code><b>jdic.jar</b></code>
files in the appropriate folders.</li>
  </ul>
Example:
  <blockquote>
    <p><code>http://localhost:8080/fileexplorer (root directory)</code></p>
    <ul type="circle">
      <li><code>lib/fileexplorer.jar</code>: contains the Java class
files and image resource files of FileExplorer. </li>
      <li><code>lib/win32/jdic.jar</code>: contains the JDIC Java class
files for Windows. </li>
      <li><code>lib/win32/jdic-native.jar</code>: contains the JDIC
native libraries for Windows.</li>
      <li><code>lib/linux/jdic.jar</code>: contains the JDIC Java class
files for Linux.</li>
      <li><code>lib/linux/jdic-native.jar</code>: contains the JDIC
native libraries for Linux. </li>
      <li><code>lib/solaris/jdic.jar</code>: contains the JDIC Java
class files for Solaris.</li>
      <li><code>lib/solaris/jdic-native.jar</code>: contains the JDIC
native libraries for Solaris. </li>
    </ul>
  </blockquote>
</blockquote>
<b>2. Implement a JNLP file</b>
<blockquote>Below is a sample <span style="font-weight: bold;"><code>fileexplorer.jnlp</code></span>
file for the FileExplorer application: <br>
  <br>
  <table bgcolor="#cccccc" width="100%" cellpadding="5" cellspacing="0"
 border="1">
    <tbody>
      <tr>
        <td>
        <pre><code>1    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; 
2    &lt;!-- JNLP File for JDIC Demo Application (FileExplorer) --&gt; 
3    &lt;jnlp spec=&quot;1.0+&quot; codebase=&quot;</code><code>http://localhost:8080/fileexplorer</code><code>&quot; href=&quot;fileexplorer.jnlp&quot;&gt; 
4        &lt;information&gt; 
5            &lt;title&gt;JDIC FileExplorer Example&lt;/title&gt; 
6            &lt;vendor&gt;Your website&lt;/vendor&gt; 
7            &lt;description&gt;</code><code>FileExplorer Example App.</code><code>&lt;/description&gt; 
8           &lt;description kind=&quot;short&quot;&gt;</code><code>FileExplorer Example App.</code><code>&lt;/description&gt; 
9           &lt;offline-allowed/&gt; 
10       &lt;/information&gt; 
11       &lt;security&gt; 
12           &lt;all-permissions/&gt;
13       &lt;/security&gt; 
14       &lt;resources&gt;
15           &lt;j2se      version=&quot;1.4+&quot;/&gt;
16           &lt;jar       href=&quot;lib/fileexplorer.jar&quot;/&gt; </code>
<code>17       &lt;/resources&gt;
18       &lt;resources os=&quot;Windows&quot;&gt;
19           &lt;jar       href=&quot;lib/win32/jdic.jar&quot;/&gt; 
20           &lt;nativelib href=&quot;lib/win32/jdic-native.jar&quot;/&gt;
21       &lt;/resources&gt;
</code><code>22       &lt;resources os=&quot;SunOS&quot;&gt;
</code><code>23           &lt;jar       href=&quot;lib/solaris/jdic.jar&quot;/&gt; 
24           &lt;nativelib href=&quot;lib/solaris/jdic-native.jar&quot;/&gt;
25       &lt;/resources&gt;
26       &lt;resources os=&quot;Linux&quot;&gt;
27           &lt;jar       href=&quot;lib/linux/jdic.jar&quot;/&gt; 
28           &lt;nativelib href=&quot;lib/linux/jdic-native.jar&quot;/&gt;
29       &lt;/resources&gt;
30       &lt;application-desc main-class=&quot;FileExplorer&quot;/&gt;
31    &lt;/jnlp&gt;
</code></pre>        </td>
      </tr>
    </tbody>
  </table>
  <br>
  <strong>Note: </strong>
  <ul>
    <li>In line 3, the <code><b>codebase</b></code> attribute and in
lines 4 through 10, the attributes specified in the <code><b>information</b></code>
tag should be changed accordingly by the user.<br>
    </li>
    <li>A JDIC application is required to load a system library upon
execution, it needs to have full access to the user's machine. The <code><b>security</b></code>
tag in lines 11 through 13 shows how an application can request full
access to a client's environment. In order for Java Web Start to grant
this level of access, all the application's JAR files must be digitally
signed (see below step 3).<br>
    </li>
    <li>The <code><b>resources</b></code> tag in lines 14 through 17
specifies the application JAR file, which contains cross-platform Java
class files and image resource files.<br>
    </li>
    <li>The <code><b>resources</b></code> tags in lines 18 through 29
load the appropriate JDIC JAR files for a particular operating system
(Windows/Linux/Solaris). <br>
The <code><b>os</b></code> attribute specifies the operating system
for which the resources element should be considered,<code><i> </i></code>which
is based on the end user's <code>os.name</code> Java system property. <br>
The <code><b>resources</b></code> tags could also allow resources for
use only by a particular architecture, such as x86 and sparc, by
specifying the <code><b>arch</b></code> attribute, which is based on
the end user's <code>os.arch</code> Java system property. Since JDIC
depends on the operation system,&nbsp; not on the architecture, the <b><code>arch</code></b>
attribute is not used.<br>
    </li>
    <li>The <code><b>nativelib</b></code> tags in lines 20, 24, and 28
tell Java Web Start that the specified JAR file contains native
libraries. For JDIC, the native JAR files contain some <code>.dll</code>
files for Windows, or some <code>.so</code> files for Linux/Solaris.<br>
    </li>
    <li>In line 30, the <code>main-class</code> attribute in the <code><b>application-desc</b></code>
tag specifies the main class name, by which Java Web Start finds the
class containing the <code>main</code> method to execute.&nbsp; </li>
  </ul>
</blockquote>
<b>3. Sign the JAR files</b>
<blockquote> Each JAR file must be signed with your own key
certificate. Details on the JAR certification can be found at <a
 href="http://java.sun.com/j2se/1.4.2/docs/guide/jws/developersguide/development.html#security">Security
and Code Signing</a>.</blockquote>
<b>4. Deploy and test the JNLP application</b>
<blockquote>
  <ul>
    <li>Set up a local web server and put the <code>fileexplorer</code>
directory in the root directory. </li>
    <li>Open a Web browser to the following URL and click on the
following link:
      <p><code><a href="http://localhost/fileexplorer/fileexplorer.jnlp">http://localhost/fileexplorer/fileexplorer.jnlp</a></code>      </p>
    </li>
  </ul>
Clicking the link should activate Java Web Start and download the JAR
files (Note: If you haven't associated .jnlp files with the <code>javaws</code>
exectuable, you should choose the <code>javaws</code> executable to
open it.) After that, FileExplorer launches. </blockquote>
</body>
</html>
